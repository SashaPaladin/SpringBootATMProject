# Выпускной проект

## Выполнено

Была построена модель получения, снятия и пополнения клиентом баланса по карте на банкомате, на основе 2 Spring Boot приложений -  банкомата(port 8081) и сервер(port 8080), которые взаимодействуют по REST. На сервере стоит авторизация по логину и паролю, а дальнейший доступ осуществляется по jwt-токену. Сервисы покрыты тестами. Добавлена возможность осуществлять взаимодействие через Apache Kafka.

## Endpoints

### Client:

Авторизация банкомата на сервере:
* GET /auth

Получение баланса по номеру и пин-коду:
* GET /balance?number=&pin=

Пополнение баланса по номеру и пин-коду:
* GET /replenishment?number=&pin=&value=

Снятие баланса по номеру и пин-коду:
* GET /withdrawal?number=&pin=&value=

#### Для взаимодействия через Kafka:

Получение баланса по номеру и пин-коду:
* GET /kafka/balance?number=&pin=

Пополнение баланса по номеру и пин-коду:
* GET /kafka/replenishment?number=&pin=&value=

Снятие баланса по номеру и пин-коду:
* GET /kafka/withdrawal?number=&pin=&value=

### Server

Авторизация банкомата на сервере:
* POST /auth

Обрабатывает запросы на получение/пополнение/снятие баланса с карты:
* POST /api/balance


## Модуль common
### AuthenticationRequest

| Тип     | Поле       |
|---------|------------|
| String  | id         |
| String  | firstName  |

### AuthenticationResponse

| Тип     | Поле       |
|---------|------------|
| String  | token      |

### BalancenRequest

| Тип     | Поле          |
|---------|---------------|
| Long    | numberCard    |
| Integer | pin           |
| String  | operationType |
| Long    | value         |

### BalancenResponse

| Тип     | Поле            |
|---------|-----------------|
| String  | operationStatus |
| Long    | balance         |

### ErrorMessage

| Тип     | Поле       |
|---------|------------|
| Integer | status     |
| String  | message    |


## Задание

Построить модель получения клиентом баланса по карте на банкоматом. Классы доменной модели ничего не должны знать о техническом окружении. Подробности технического окружения должны быть скрыты за слоями абстракции.

В качестве системы сборки должен использоваться Maven. В финальной версии приложение должно представлять из себя 2 Spring Boot приложения. Одно будет выполнять роль клиента\банкомата, а другое роль сервера. Приложение с ролью сервер должно хранить свои данные в базе данных H2. Для взаимодействия приложения должны использовать REST. Модули должны быть покрыты JUnit тестами.

Приложение с ролью сервер должно требовать аутентификации по логину и паролю с использованием Spring Security.

В качестве задания на 5+ приложения должны уметь переключаться на взаимодействие через Apache Kafka.